<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<meta name="theme-color" content="#008800">
<meta name="robots" content="index,follow">
<meta name="keywords" content="v5,userguide,learn_extensions,new_driver">
<link rel="search" type="application/opensearchdescription+xml" href="../../../lib/exe/opensearch.html" title="ADOdb">
<link rel="start" href="new_driver.html">
<link rel="contents" href="new_driver.html" title="Sitemap">
<link rel="manifest" href="../../../lib/exe/manifest.html">
<link rel="alternate" type="application/rss+xml" title="Recent Changes">
<link rel="alternate" type="application/rss+xml" title="Current namespace">
<link rel="alternate" type="text/html" title="Plain HTML" href="new_driver.html">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="new_driver.html">
<link rel="canonical" href="https://adodb.org/dokuwiki/doku.php?id=v5:userguide:learn_extensions:new_driver">
<link rel="stylesheet" href="../../../lib/exe/css.php.t.dokuwiki.css">
<!--[if gte IE 9]><!-->
<script>/*<![CDATA[*/var NS='v5:userguide:learn_extensions';var JSINFO = {"plugins":{"edittable":{"default columnwidth":""}},"move_renameokay":false,"id":"v5:userguide:learn_extensions:new_driver","namespace":"v5:userguide:learn_extensions","ACT":"show","useHeadingNavigation":1,"useHeadingContent":1};
/*!]]>*/</script>
<script src="../../../lib/exe/jquery.php.t.dokuwiki.js" defer>/*<![CDATA[*/
/*!]]>*/</script>
<script src="../../../lib/exe/js.php.t.dokuwiki.js" defer>/*<![CDATA[*/
/*!]]>*/</script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="../../../lib/tpl/dokuwiki/images/favicon.ico">
<link rel="apple-touch-icon" href="../../../lib/tpl/dokuwiki/images/apple-touch-icon.png">
    <title>v5:userguide:learn_extensions:new_driver</title></head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki    showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<header id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1 class="logo"><a href="../../..//index.html" accesskey="h" title="Home [h]"><img src="../../../logo.png" width="176" height="62" alt=""> <span>ADOdb</span></a></h1>
                    <p class="claim">Database Abstraction Layer for PHP</p>
            </div>

    

    <!-- BREADCRUMBS -->
            
    
    <hr class="a11y">
<div style="text-align:right"><a href="https://adodb.org">ADOdb Web Site</a></div></div></header><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
                <nav id="dokuwiki__aside" aria-label="Sidebar"><div class="pad aside include group">
                    <h3 class="toggle">Sidebar</h3>
                    <div class="content"><div class="group">
                                                                        
<p>
<strong>Resources</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="../../../v5/reference/reference_index.html" class="wikilink1" title="v5:reference:reference_index" data-wiki-id="v5:reference:reference_index">Reference Manual</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/userguide/userguide_index.html" class="wikilink1" title="v5:userguide:userguide_index" data-wiki-id="v5:userguide:userguide_index">User Guide &amp; Tutorials</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/dictionary/dictionary_index.html" class="wikilink1" title="v5:dictionary:dictionary_index" data-wiki-id="v5:dictionary:dictionary_index">The Data Dictionary</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/axmls/axmls_index.html" class="wikilink1" title="v5:axmls:axmls_index" data-wiki-id="v5:axmls:axmls_index">ADOdb-xmlschema</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/activerecord/activerecord_index.html" class="wikilink1" title="v5:activerecord:activerecord_index" data-wiki-id="v5:activerecord:activerecord_index">ADOdb Active Record</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/performance/performance_index.html" class="wikilink1" title="v5:performance:performance_index" data-wiki-id="v5:performance:performance_index">Performance Monitoring</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/datetime/datetime_index.html" class="wikilink1" title="v5:datetime:datetime_index" data-wiki-id="v5:datetime:datetime_index">Date/Time Library</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/session/session_index.html" class="wikilink1" title="v5:session:session_index" data-wiki-id="v5:session:session_index">Session Management Library</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/proxy/proxy_index.html" class="wikilink1" title="v5:proxy:proxy_index" data-wiki-id="v5:proxy:proxy_index">ADOdb Proxy Server</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/addons/addons_index.html" class="wikilink1" title="v5:addons:addons_index" data-wiki-id="v5:addons:addons_index">Unsupported Addons</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../project/standards.html" class="wikilink1" title="project:standards" data-wiki-id="project:standards">Coding Standards</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/php_compatibility_status.html" class="wikilink1" title="v5:php_compatibility_status" data-wiki-id="v5:php_compatibility_status">PHP Compatibility Status</a></div>
</li>
</ul>

<p>
<strong><a href="../../../v5/database/supported.html" class="wikilink1" title="v5:database:supported" data-wiki-id="v5:database:supported">Supported Databases</a></strong>
</p>
<ol>
<li class="level1"><div class="li"> Full support    <ul><li><a href="../../../v5/database/ibm_db2.html" class="wikilink1" title="v5:database:ibm_db2">IBM DB2</a></li><li><a href="../../../v5/database/microsoft_sql_server.html" class="wikilink1" title="v5:database:microsoft_sql_server">Microsoft SQL Server</a></li><li><a href="../../../v5/database/mysql.html" class="wikilink1" title="v5:database:mysql">MySQL</a></li><li><a href="../../../v5/database/oracle.html" class="wikilink1" title="v5:database:oracle">Oracle</a></li><li><a href="../../../v5/database/postgresql.html" class="wikilink1" title="v5:database:postgresql">PostgreSQL</a></li><li><a href="../../../v5/database/sqlite.html" class="wikilink1" title="v5:database:sqlite">SQLite Database</a></li></ul></div>
</li>
<li class="level1"><div class="li"> Partial support <ul><li><a href="../../../v5/database/firebird.html" class="wikilink1" title="v5:database:firebird">Firebird &amp; Interbase</a></li><li><a href="../../../v5/database/ldap.html" class="wikilink1" title="v5:database:ldap">LDAP</a></li><li><a href="../../../v5/database/access.html" class="wikilink1" title="v5:database:access">Microsoft Access</a></li><li><a href="../../../v5/database/odbc.html" class="wikilink1" title="v5:database:odbc">ODBC</a></li><li><a href="../../../v5/database/pdo.html" class="wikilink1" title="v5:database:pdo">PDO</a></li><li><a href="../../../v5/database/pdo_new.html" class="wikilink1" title="v5:database:pdo_new">PDO (new)</a></li></ul></div>
</li>
<li class="level1"><div class="li"> <a href="../../../v5/database/unsupported.html" class="wikilink1" title="v5:database:unsupported" data-wiki-id="v5:database:unsupported">Obsolete/Unsupported Drivers</a></div>
</li>
</ol>
                                            </div></div>
                </div></nav><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <main id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>v5:userguide:learn_extensions:new_driver</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="docnavbar"><div class="leftnav">&nbsp;</div><div class="rightnav">&nbsp;<a href="../../../v5/learn_extensions/extend_existing/modify_existing_driver.html" class="wikilink1" title="v5:learn_extensions:extend_existing:modify_existing_driver" data-wiki-id="v5:learn_extensions:extend_existing:modify_existing_driver">Modifying An Existing Driver </a> &rarr;</div></div>


<h1 class="sectionedit1" id="creating_a_new_driver">Creating A New Driver</h1>
<div class="level1">

<p>
The simplest way to extend ADOdb for your own use is to create a new driver. ADOdb behaves like all PHP class definitions, in that its class methods and variables can be extended. As an example, we can look at the ADOdb driver <strong>/drivers/adodb-odbc-mssql2012.inc.php</strong>
</p>

<p>
This driver was created because the behaviour of Microsoft SQL Server 2012 differs slightly from previous versions when connecting via an ODBC connection. 
</p>

<p>
The driver, in it's entirety, looks like this:
</p>
<pre class="code php"><span class="co4">/**
*  Microsoft SQL Server 2012 via ODBC
*/</span>
&nbsp;
<span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span><a target="_blank" href="http://www.php.net/defined"><span class="kw3">defined</span></a><span class="br0">(</span><span class="st_h">'ADODB_DIR'</span><span class="br0">)</span><span class="br0">)</span> 
	<a target="_blank" href="http://www.php.net/die"><span class="kw3">die</span></a><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">include_once</span><span class="br0">(</span>ADODB_DIR<span class="sy0">.</span><span class="st0">"/drivers/adodb-odbc_mssql.inc.php"</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">class</span>  ADODB_odbc_mssql2012 <span class="kw2">extends</span> ADODB_odbc_mssql
<span class="br0">{</span>
	<span class="coMULTI">/*
	* Makes behavior similar to prior versions of SQL Server
	*/</span>
	<span class="kw2">var</span> <span class="re0">$connectStmt</span> <span class="sy0">=</span> <span class="st_h">'SET CONCAT_NULL_YIELDS_NULL ON'</span><span class="sy0">;</span>
<span class="br0">}</span>
&nbsp;
<span class="kw2">class</span>  ADORecordSet_odbc_mssql2012 <span class="kw2">extends</span> ADORecordSet_odbc_mssql
<span class="br0">{</span>
<span class="br0">}</span></pre>
<ul>
<li class="level1"><div class="li"> Both the connection and recordset classes must be defined, even if they are not modified</div>
</li>
<li class="level1"><div class="li"> The driver <strong>must</strong> be located in the ADODB_DIR directory. Take care that the driver is not lost when upgrading</div>
</li>
<li class="level1"><div class="li"> No other action is required, simply enter the name of the new driver in the newAdoConnection() statement.</div>
</li>
</ul>

</div>

<h2 class="sectionedit2" id="understanding_the_data_provider">Understanding The Data Provider</h2>
<div class="level2">

<p>
Because ADOdb V5 is not truly Object Orientated, an extended driver does not necessarily extend the required parent. One might expect to see the following chain of code:
</p>
<pre class="code php"><span class="kw2">class</span> ADOnewConnection
<span class="kw2">class</span> <a target="_blank" href="http://www.php.net/mysql"><span class="kw3">mysql</span></a> <span class="kw2">extends</span> ADOnewConnection
<span class="kw2">class</span> mysqli <span class="kw2">extends</span> <a target="_blank" href="http://www.php.net/mysql"><span class="kw3">mysql</span></a></pre>

<p>
But if we look at the source code of the <a href="../../../v5/database/mysql.html" class="wikilink1" title="v5:database:mysql" data-wiki-id="v5:database:mysql">mysqli</a> driver (<strong>drivers/adodb-mysqli.inc.php</strong>) , we can see that the class is defined like this
</p>
<pre class="code php"><span class="kw2">class</span> ADODB_mysqli <span class="kw2">extends</span> ADOConnection <span class="br0">{</span>
	<span class="kw2">var</span> <span class="re0">$databaseType</span> <span class="sy0">=</span> <span class="st_h">'mysqli'</span><span class="sy0">;</span>
	<span class="kw2">var</span> <span class="re0">$dataProvider</span> <span class="sy0">=</span> <span class="st_h">'mysql'</span><span class="sy0">;</span></pre>

<p>
So the class extends the connector, but much of the MySQL specific functionality is found in the <strong><em>provider</em></strong> (<strong>drivers/adodb-mysql.inc.php</strong>). The <strong>provider</strong> is effectively a parallel class. So if we wanted, for example, to create a new driver <em><strong>mydriver</strong></em> that did not directly extend an existing class, but shared much of the feature with say, the <a href="../../../v5/database/microsoft_sql_server.html" class="wikilink1" title="v5:database:microsoft_sql_server" data-wiki-id="v5:database:microsoft_sql_server">mssqlnative</a> class, our code might look like:
</p>
<pre class="code php"><span class="kw2">class</span> ADODB_mydriver <span class="kw2">extends</span> ADOConnection <span class="br0">{</span>
	<span class="kw2">var</span> <span class="re0">$databaseType</span> <span class="sy0">=</span> <span class="st_h">'mydriver'</span><span class="sy0">;</span>
	<span class="kw2">var</span> <span class="re0">$dataProvider</span> <span class="sy0">=</span> <span class="st_h">'mssqlnative'</span><span class="sy0">;</span></pre>

</div>

<h2 class="sectionedit3" id="base_level_classes">Base Level Classes</h2>
<div class="level2">

<p>
If we look at say, the <a href="../../../v5/database/microsoft_sql_server.html" class="wikilink1" title="v5:database:microsoft_sql_server" data-wiki-id="v5:database:microsoft_sql_server">mssqlnative</a> class, (<strong>drivers/adodb-mssqlnative.inc.php</strong>). we see the following:
</p>
<pre class="code php"><span class="kw2">class</span> ADODB_mssqlnative <span class="kw2">extends</span> ADOConnection <span class="br0">{</span>
	<span class="kw2">var</span> <span class="re0">$databaseType</span> <span class="sy0">=</span> <span class="st_h">'mssqlnative'</span><span class="sy0">;</span>
	<span class="kw2">var</span> <span class="re0">$dataProvider</span> <span class="sy0">=</span> <span class="st_h">'mssqlnative'</span><span class="sy0">;</span></pre>

<p>
In this case, the <strong>$databaseType</strong> and the <strong>$dataProvider</strong> are the same. This means that all of the functionality of the driver is provided by the named driver (<strong>drivers/adodb-mssqlnative.inc.php</strong>) and datadict (<strong>datadict/datadict-mssqlnative.inc.php</strong>) files .
</p>

</div>

<h2 class="sectionedit4" id="using_provider_classes">Using Provider Classes</h2>
<div class="level2">

<p>
Data Provider classes are designed exactly the same as database driver classes. Where the provider class is different from the database class, the provider class is generally associated with an obsolete database version, often 15-20 years old. As such, they cannot be used as drivers.
</p>

</div>
<div class="clearer"></div><div class="docnavbar showtoc"><div class="leftnav">&nbsp;</div><div class="centernav"><a href="../../../v5/userguide/userguide_index.html" class="wikilink1" title="v5:userguide:userguide_index" data-wiki-id="v5:userguide:userguide_index">List Of Tutorials </a>&nbsp;</div><div class="rightnav">&nbsp;<a href="../../../v5/learn_extensions/extend_existing/modify_existing_driver.html" class="wikilink1" title="v5:learn_extensions:extend_existing:modify_existing_driver" data-wiki-id="v5:learn_extensions:extend_existing:modify_existing_driver">Modifying An Existing Driver </a> &rarr;</div></div>
                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>v5/userguide/learn_extensions/new_driver.txt</bdi> &middot; Last modified: 2020/01/15 04:13 by <bdi>mnewnham</bdi></div>

                
                <hr class="a11y">
            </div></main><!-- /content -->

            <!-- PAGE ACTIONS -->
            <nav id="dokuwiki__pagetools" aria-labelledby="dokuwiki__pagetools__heading">
                <h3 class="a11y" id="dokuwiki__pagetools__heading">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="source"><a href="new_driver.html" title="Show pagesource [v]" rel="nofollow" accesskey="v"><span>Show pagesource</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5l3.74 3.74 1.42-1.41-2.33-2.33 2.33-2.33-1.42-1.41-3.74 3.74m11.16 0l-3.74-3.74-1.42 1.41 2.33 2.33-2.33 2.33 1.42 1.41 3.74-3.74z"></path></svg></a></li><li class="revs"><a href="new_driver.html" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"></path></svg></a></li><li class="backlink"><a href="new_driver.html" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"></path></svg></a></li><li class="siteexport_addpage"><a href="new_driver.html" title="Export Page to HTML/PDF" rel="nofollow"><span>Export Page to HTML/PDF</span><svg width="61px" height="51px" viewbox="0 0 61 51" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><path d="M26.1891503,39.0065635 L26.0876578,38.9773206 L60.6523866,1.23972885 L60.4321374,2.11844376 L60.476442,2.07071678 L60.4265202,2.14085429 L49.5024876,45.7237994 L32.8255882,40.9187101 L26,50.508302 L26,39.2103249 L26.1891503,39.0065635 Z M60.9727675,0.862917243 L22.2676619,38.2155059 L-0.00245042233,30.2214566 L60.9727675,0.862917243 Z" id="Paper-Plane"></path></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path></svg></a></li>                    </ul>
                </div>
            </nav>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<footer id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" rel="license" class="urlextern" target="_blank">CC Attribution-Share Alike 4.0 International</a></bdi></div>
    <div class="buttons">
        <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" rel="license" target="_blank"><img src="../../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 4.0 International"></a>        <a href="https://www.dokuwiki.org/donate" title="Donate" target="_blank"><img src="../../../lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate"></a>
        <a href="https://php.net" title="Powered by PHP" target="_blank"><img src="../../../lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP"></a>
        <a href="../../../check/referer" title="Valid HTML5" target="_blank"><img src="../../../lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5"></a>
        <a href="../../../css-validator/check/referer.profile.css3?profile=css3" title="Valid CSS" target="_blank"><img src="../../../lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS"></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" target="_blank"><img src="../../../lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki"></a>
    </div>

    </div></footer><!-- /footer -->
    </div></div><!-- /site -->

    <div class="no"><img src="../../../lib/exe/taskrunner.1688205698.gif?1688205698" width="2" height="1" alt=""></div>
    <div id="screen__mode" class="no"></div></body>
</html>
