<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<meta name="theme-color" content="#008800">
<meta name="robots" content="index,follow">
<meta name="keywords" content="v5,userguide,error_handling">
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.html" title="ADOdb">
<link rel="start" href="error_handling.html">
<link rel="contents" href="error_handling.html" title="Sitemap">
<link rel="manifest" href="../../lib/exe/manifest.html">
<link rel="alternate" type="application/rss+xml" title="Recent Changes">
<link rel="alternate" type="application/rss+xml" title="Current namespace">
<link rel="alternate" type="text/html" title="Plain HTML" href="error_handling.html">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="error_handling.html">
<link rel="canonical" href="https://adodb.org/dokuwiki/doku.php?id=v5:userguide:error_handling">
<link rel="stylesheet" href="../../lib/exe/css.php.t.dokuwiki.css">
<!--[if gte IE 9]><!-->
<script>/*<![CDATA[*/var NS='v5:userguide';var JSINFO = {"plugins":{"edittable":{"default columnwidth":""}},"move_renameokay":false,"id":"v5:userguide:error_handling","namespace":"v5:userguide","ACT":"show","useHeadingNavigation":1,"useHeadingContent":1};
/*!]]>*/</script>
<script src="../../lib/exe/jquery.php.t.dokuwiki.js" defer>/*<![CDATA[*/
/*!]]>*/</script>
<script src="../../lib/exe/js.php.t.dokuwiki.js" defer>/*<![CDATA[*/
/*!]]>*/</script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="../../lib/tpl/dokuwiki/images/favicon.ico">
<link rel="apple-touch-icon" href="../../lib/tpl/dokuwiki/images/apple-touch-icon.png">
    <title>v5:userguide:error_handling</title></head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki    showSidebar hasSidebar">

        
<!-- ********** HEADER ********** -->
<header id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1 class="logo"><a href="../..//index.html" accesskey="h" title="Home [h]"><img src="../../logo.png" width="176" height="62" alt=""> <span>ADOdb</span></a></h1>
                    <p class="claim">Database Abstraction Layer for PHP</p>
            </div>

    

    <!-- BREADCRUMBS -->
            
    
    <hr class="a11y">
<div style="text-align:right"><a href="https://adodb.org">ADOdb Web Site</a></div></div></header><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
                <nav id="dokuwiki__aside" aria-label="Sidebar"><div class="pad aside include group">
                    <h3 class="toggle">Sidebar</h3>
                    <div class="content"><div class="group">
                                                                        
<p>
<strong>Resources</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="../../v5/reference/reference_index.html" class="wikilink1" title="v5:reference:reference_index" data-wiki-id="v5:reference:reference_index">Reference Manual</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/userguide/userguide_index.html" class="wikilink1" title="v5:userguide:userguide_index" data-wiki-id="v5:userguide:userguide_index">User Guide &amp; Tutorials</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/dictionary/dictionary_index.html" class="wikilink1" title="v5:dictionary:dictionary_index" data-wiki-id="v5:dictionary:dictionary_index">The Data Dictionary</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/axmls/axmls_index.html" class="wikilink1" title="v5:axmls:axmls_index" data-wiki-id="v5:axmls:axmls_index">ADOdb-xmlschema</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/activerecord/activerecord_index.html" class="wikilink1" title="v5:activerecord:activerecord_index" data-wiki-id="v5:activerecord:activerecord_index">ADOdb Active Record</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/performance/performance_index.html" class="wikilink1" title="v5:performance:performance_index" data-wiki-id="v5:performance:performance_index">Performance Monitoring</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/datetime/datetime_index.html" class="wikilink1" title="v5:datetime:datetime_index" data-wiki-id="v5:datetime:datetime_index">Date/Time Library</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/session/session_index.html" class="wikilink1" title="v5:session:session_index" data-wiki-id="v5:session:session_index">Session Management Library</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/proxy/proxy_index.html" class="wikilink1" title="v5:proxy:proxy_index" data-wiki-id="v5:proxy:proxy_index">ADOdb Proxy Server</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/addons/addons_index.html" class="wikilink1" title="v5:addons:addons_index" data-wiki-id="v5:addons:addons_index">Unsupported Addons</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../project/standards.html" class="wikilink1" title="project:standards" data-wiki-id="project:standards">Coding Standards</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/php_compatibility_status.html" class="wikilink1" title="v5:php_compatibility_status" data-wiki-id="v5:php_compatibility_status">PHP Compatibility Status</a></div>
</li>
</ul>

<p>
<strong><a href="../../v5/database/supported.html" class="wikilink1" title="v5:database:supported" data-wiki-id="v5:database:supported">Supported Databases</a></strong>
</p>
<ol>
<li class="level1"><div class="li"> Full support    <ul><li><a href="../../v5/database/ibm_db2.html" class="wikilink1" title="v5:database:ibm_db2">IBM DB2</a></li><li><a href="../../v5/database/microsoft_sql_server.html" class="wikilink1" title="v5:database:microsoft_sql_server">Microsoft SQL Server</a></li><li><a href="../../v5/database/mysql.html" class="wikilink1" title="v5:database:mysql">MySQL</a></li><li><a href="../../v5/database/oracle.html" class="wikilink1" title="v5:database:oracle">Oracle</a></li><li><a href="../../v5/database/postgresql.html" class="wikilink1" title="v5:database:postgresql">PostgreSQL</a></li><li><a href="../../v5/database/sqlite.html" class="wikilink1" title="v5:database:sqlite">SQLite Database</a></li></ul></div>
</li>
<li class="level1"><div class="li"> Partial support <ul><li><a href="../../v5/database/firebird.html" class="wikilink1" title="v5:database:firebird">Firebird &amp; Interbase</a></li><li><a href="../../v5/database/ldap.html" class="wikilink1" title="v5:database:ldap">LDAP</a></li><li><a href="../../v5/database/access.html" class="wikilink1" title="v5:database:access">Microsoft Access</a></li><li><a href="../../v5/database/odbc.html" class="wikilink1" title="v5:database:odbc">ODBC</a></li><li><a href="../../v5/database/pdo.html" class="wikilink1" title="v5:database:pdo">PDO</a></li><li><a href="../../v5/database/pdo_new.html" class="wikilink1" title="v5:database:pdo_new">PDO (new)</a></li></ul></div>
</li>
<li class="level1"><div class="li"> <a href="../../v5/database/unsupported.html" class="wikilink1" title="v5:database:unsupported" data-wiki-id="v5:database:unsupported">Obsolete/Unsupported Drivers</a></div>
</li>
</ol>
                                            </div></div>
                </div></nav><!-- /aside -->
            
            <!-- ********** CONTENT ********** -->
            <main id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>v5:userguide:error_handling</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#default_behaviour">Default Behaviour</a></div></li>
<li class="level1"><div class="li"><a href="#php_set_error_handler">PHP set_error_handler</a></div></li>
<li class="level1"><div class="li"><a href="#adodb-errorhandlerincphp">adodb-errorhandler.inc.php</a></div></li>
<li class="level1"><div class="li"><a href="#error_reporting">error_reporting</a></div></li>
<li class="level1"><div class="li"><a href="#override_error_trapresume">Override Error Trap/Resume</a></div></li>
<li class="level1"><div class="li"><a href="#using_a_class_method">Using A Class Method</a></div></li>
<li class="level1"><div class="li"><a href="#combining_with_custom_error_handling">Combining With Custom Error Handling</a></div></li>
<li class="level1"><div class="li"><a href="#exception_trapping">Exception Trapping</a></div></li>
<li class="level1"><div class="li"><a href="#logging_error_messages">Logging Error Messages</a></div></li>
<li class="level1"><div class="li"><a href="#pear_error">PEAR_ERROR</a></div></li>
<li class="level1"><div class="li"><a href="#metaerror_and_metaerrmsg">MetaError and MetaErrMsg</a></div></li>
<li class="level1"><div class="li"><a href="#error_messages">Error Messages</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="error_handling_in_adodb">Error Handling  In ADOdb</h1>
<div class="level1">

</div>

<h2 class="sectionedit2" id="default_behaviour">Default Behaviour</h2>
<div class="level2">

<p>
By default, errors in the execution of SQL statements are handled by the database driver that is being accessed by PHP. No errors are normally handled and it is necessary to query the last error code to see if there has been an error. This is done by use of the '@' PHP value, that causes errors in the statement to be ignored.
</p>

</div>

<h2 class="sectionedit3" id="php_set_error_handler">PHP set_error_handler</h2>
<div class="level2">

<p>
Once the PHP set_error_handler is used to override the default error handling, then the '@' PHP value ceases to be honored, and any SQL statement execution that fails will then produce a fatal error in the statement. We must then implement an error handling layer to trap the error and process it as the required. The first way to do that is by the use of the <code>adodb-errorhandler.inc</code> file.
</p>
<hr>
<div class="wrap_right wrap_box wrap_round plugin_wrap">
<h5 id="see_also">See Also</h5>

<p>
<a href="../../v5/reference/connection/metaerror.html" class="wikilink1" title="v5:reference:connection:metaerror" data-wiki-id="v5:reference:connection:metaerror">Meta Error Handling</a>
</p>
</div>
</div>

<h2 class="sectionedit6" id="adodb-errorhandlerincphp">adodb-errorhandler.inc.php</h2>
<div class="level2">

<p>
This file is designed to be copied off and customized for your own use. In it's simplest form, it can be used to emulate the '@' continue-on-error character, but it can be used to trigger or log errors, or do any kind of error handling processing required.
</p>
<pre class="code php"><span class="kw1">include</span> <span class="st_h">'adodb-directory/adodb.inc.php'</span><span class="sy0">;</span>
<span class="kw1">include</span> <span class="st_h">'my-directory/adodb-errorhandler.inc.php'</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$db</span> <span class="sy0">=</span> newAdoConnection<span class="br0">(</span><span class="st_h">'mysqli'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">connect</span><span class="br0">(</span><span class="st_h">''</span><span class="sy0">,</span><span class="st_h">'user'</span><span class="sy0">,</span><span class="st_h">'password'</span><span class="sy0">,</span><span class="st_h">'employees'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="coMULTI">/*
* Invalid SQL statement will be trapped inside the custom errorhandling file
*/</span>
<span class="re0">$result</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">execute</span><span class="br0">(</span><span class="st_h">'SELECX * FROM products'</span><span class="br0">)</span><span class="sy0">;</span></pre>

</div>

<h2 class="sectionedit7" id="error_reporting">error_reporting</h2>
<div class="level2">

<p>
The ADOdb error handler is not dependent on <a href="http://php.net/manual/en/function.error-reporting.php" class="urlextern" target="_blank" title="http://php.net/manual/en/function.error-reporting.php" rel="ugc nofollow noopener">PHP Error Reporting</a> being set to a value greater than zero. However, the default behaviour of <code>adodb-errorhandler.inc.php</code> is to respect this setting by returning immediately from the error trap. You can change this by modifying the source of that file.
</p>
<pre class="code php"><span class="kw2">function</span> ADODB_Error_Handler<span class="br0">(</span><span class="re0">$dbms</span><span class="sy0">,</span> <span class="re0">$fn</span><span class="sy0">,</span> <span class="re0">$errno</span><span class="sy0">,</span> <span class="re0">$errmsg</span><span class="sy0">,</span> <span class="re0">$p1</span><span class="sy0">,</span> <span class="re0">$p2</span><span class="sy0">,</span> <span class="sy0">&amp;</span><span class="re0">$thisConnection</span><span class="br0">)</span>
<span class="br0">{</span>
&nbsp;
    <span class="coMULTI">/*
    * Remark out this line to trap errors when error_reporting = 0
    */</span>
    <span class="kw1">if</span> <span class="br0">(</span><a target="_blank" href="http://www.php.net/error_reporting"><span class="kw3">error_reporting</span></a><span class="br0">(</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">)</span> 
          <span class="kw1">return</span><span class="sy0">;</span> <span class="co1">// obey @ protocol</span>
&nbsp;</pre>

</div>

<h2 class="sectionedit8" id="override_error_trapresume">Override Error Trap/Resume</h2>
<div class="level2">

<p>
In certain circumstances, it may be necessary to trap errors differently or override the normal error handling. The current error handler, which is stored in the class variable  <code>raiseErrorFn</code>, can be temporarily replaced. In this example, we use that functionality to ignore a database error.
</p>
<pre class="code php"><span class="co4">/**
  * Traps errors and ignores them
  */</span>
<span class="kw2">function</span> ignoreErrorHandler<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
	<span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span>
<span class="br0">}</span>
&nbsp;
<span class="coMULTI">/*
* In Oracle we have no 'if index exists' function, 
* so if the index did not exist in the first place, it would throw an error
* We want the error ignored, and for the program to continue as normal
*/</span>
&nbsp;
<span class="re0">$saveErrorFn</span> <span class="sy0">=</span> <span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">raiseErrorFn</span><span class="sy0">;</span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">raiseErrorFn</span> <span class="sy0">=</span> <span class="st_h">'ignoreErrorHandler'</span><span class="sy0">;</span>
<a target="_blank" href="http://www.php.net/set_error_handler"><span class="kw3">set_error_handler</span></a><span class="br0">(</span><span class="st_h">'ignoreErrorHandler'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">execute</span><span class="br0">(</span><span class="st_h">'DROP INDEX index_that_might_not_exist'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="coMULTI">/*
* Set the error handling back
*/</span>	
<a target="_blank" href="http://www.php.net/restore_error_handler"><span class="kw3">restore_error_handler</span></a><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">raiseErrorFn</span> <span class="sy0">=</span> <span class="re0">$saveErrorFn</span><span class="sy0">;</span></pre>

</div>

<h2 class="sectionedit9" id="using_a_class_method">Using A Class Method</h2>
<div class="level2">
<pre class="code php"><span class="kw2">class</span> c
<span class="br0">{</span>
	<span class="kw2">function</span> e<span class="br0">(</span><span class="br0">)</span>
	<span class="br0">{</span>
		<span class="kw1">print</span> <span class="st0">"ERROR TRAP"</span><span class="sy0">;</span>
	<span class="br0">}</span>
<span class="br0">}</span>
&nbsp;
<span class="re0">$c</span> <span class="sy0">=</span> <span class="kw2">new</span> c<span class="sy0">;</span>
&nbsp;
<span class="re0">$db</span><span class="sy0">-&gt;</span><span class="me1">raiseErrorFn</span> <span class="sy0">=</span> <a target="_blank" href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">(</span><span class="re0">$c</span><span class="sy0">,</span><span class="st_h">'e'</span><span class="br0">)</span><span class="sy0">;</span></pre>

</div>

<h2 class="sectionedit10" id="combining_with_custom_error_handling">Combining With Custom Error Handling</h2>
<div class="level2">

<p>
If you use <code>adodb-errorhandler.inc.php</code>, you can still define your own error handling to deal with non-adodb errors. 
</p>
<pre class="code php"><a target="_blank" href="http://www.php.net/error_reporting"><span class="kw3">error_reporting</span></a><span class="br0">(</span><span class="kw4">E_ALL</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">function</span> myErrorHandler<span class="br0">(</span><span class="re0">$p1</span><span class="sy0">,</span><span class="re0">$p2</span><span class="sy0">,</span><span class="re0">$p3</span><span class="sy0">,</span><span class="re0">$p4</span><span class="sy0">,</span><span class="re0">$p5</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="coMULTI">/*
    * Do some non-adodb handling
    */</span>
    <span class="kw1">return</span> <span class="kw4">true</span><span class="sy0">;</span>
<span class="br0">}</span>
&nbsp;
<a target="_blank" href="http://www.php.net/set_error_handler"><span class="kw3">set_error_handler</span></a><span class="br0">(</span><span class="st_h">'myErrorHandler'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">include</span> <span class="st_h">'./simple-errorhandler.inc.php'</span><span class="sy0">;</span>
<span class="kw1">include</span> <span class="st_h">'../adodb-master/adodb.inc.php'</span><span class="sy0">;</span></pre>

</div>

<h2 class="sectionedit11" id="exception_trapping">Exception Trapping</h2>
<div class="level2">

<p>
ADOdb supports exception trapping using the <code>adodb-exceptions.inc.php</code> file. This can be used to catch exceptions on errors as they occur. In the following example, we trap an invalid user name/password combination as an exception.
</p>
<pre class="code php"><span class="kw1">include</span> <span class="st_h">'adodb-directory/adodb.inc.php'</span><span class="sy0">;</span>
<span class="kw1">include</span> <span class="st_h">'adodb-directory/adodb-exceptions.inc.php'</span><span class="sy0">;</span>
&nbsp;
try 
<span class="br0">{</span>   
    <span class="re0">$db</span> <span class="sy0">=</span> newADOConnection<span class="br0">(</span><span class="st0">"oci8://scott:bad-password@mytns/"</span><span class="br0">)</span><span class="sy0">;</span>   
&nbsp;
<span class="br0">}</span> 
catch <span class="br0">(</span>exception <span class="re0">$e</span><span class="br0">)</span>
<span class="br0">{</span>   
    <a target="_blank" href="http://www.php.net/var_dump"><span class="kw3">var_dump</span></a><span class="br0">(</span><span class="re0">$e</span><span class="br0">)</span><span class="sy0">;</span>   
&nbsp;&nbsp;&nbsp; adodb_backtrace<span class="br0">(</span><span class="re0">$e</span><span class="sy0">-&gt;</span><span class="me1">gettrace</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>  
<span class="br0">}</span></pre>

</div>

<h2 class="sectionedit12" id="logging_error_messages">Logging Error Messages</h2>
<div class="level2">

<p>
If you want to log the error message, you can do so by defining the following optional constants:
</p>
<ul>
<li class="level1"><div class="li"> ADODB_ERROR_LOG_TYPE</div>
</li>
<li class="level2"><div class="li"> ADODB_ERROR_LOG_DEST</div>
</li>
</ul>

<p>
ADODB_ERROR_LOG_TYPE is the error log message type (see <a href="http://php.net/manual/en/function.error-log.php" class="urlextern" target="_blank" title="http://php.net/manual/en/function.error-log.php" rel="ugc nofollow noopener">error_log</a>. In the example below, the value is set to 3, which means log to the file defined by the constant ADODB_ERROR_LOG_DEST.
</p>
<pre class="code php"><a target="_blank" href="http://www.php.net/error_reporting"><span class="kw3">error_reporting</span></a><span class="br0">(</span><span class="kw4">E_ALL</span><span class="br0">)</span><span class="sy0">;</span> <span class="co2"># report all errors  
</span><a target="_blank" href="http://www.php.net/ini_set"><span class="kw3">ini_set</span></a><span class="br0">(</span><span class="st0">"display_errors"</span><span class="sy0">,</span> <span class="st0">"0"</span><span class="br0">)</span><span class="sy0">;</span> <span class="co2"># but do not echo the errors  
</span>
<a target="_blank" href="http://www.php.net/define"><span class="kw3">define</span></a><span class="br0">(</span><span class="st_h">'ADODB_ERROR_LOG_TYPE'</span><span class="sy0">,</span><span class="nu0">3</span><span class="br0">)</span><span class="sy0">;</span>  
<a target="_blank" href="http://www.php.net/define"><span class="kw3">define</span></a><span class="br0">(</span><span class="st_h">'ADODB_ERROR_LOG_DEST'</span><span class="sy0">,</span><span class="st_h">'C:/errors.log'</span><span class="br0">)</span><span class="sy0">;</span>  
&nbsp;
<span class="kw1">include</span><span class="br0">(</span><span class="st_h">'adodb-errorhandler.inc.php'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">include</span><span class="br0">(</span><span class="st_h">'adodb.inc.php'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">include</span><span class="br0">(</span><span class="st_h">'tohtml.inc.php'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
&nbsp;
<span class="re0">$c</span> <span class="sy0">=</span> newADOConnection<span class="br0">(</span><span class="st_h">'mysql'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="re0">$c</span><span class="sy0">-&gt;</span><span class="me1">pConnect</span><span class="br0">(</span><span class="st_h">'localhost'</span><span class="sy0">,</span><span class="st_h">'root'</span><span class="sy0">,</span><span class="st_h">''</span><span class="sy0">,</span><span class="st_h">'northwind'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$rs</span><span class="sy0">=</span><span class="re0">$c</span><span class="sy0">-&gt;</span><span class="me1">execute</span><span class="br0">(</span><span class="st_h">'select * from productsz'</span><span class="br0">)</span><span class="sy0">;</span> <span class="co2">## invalid table productsz
</span>
<span class="kw1">if</span> <span class="br0">(</span><span class="re0">$rs</span><span class="br0">)</span> 
    rs2html<span class="br0">(</span><span class="re0">$rs</span><span class="br0">)</span><span class="sy0">;</span></pre>

<p>
The following message will be logged in the error.log file:
</p>
<pre class="code">2001-10-28 14:20:38 mysql error: [1146: Table 'northwind.productsz' doesn't exist]
        in  EXECUTE("select * from productsz")</pre>

</div>

<h2 class="sectionedit13" id="pear_error">PEAR_ERROR</h2>
<div class="level2">

<p>
The second error handler is <strong>adodb-errorpear.inc.php</strong>. This will create a PEAR_Error derived object whenever an error occurs. The last PEAR_Error object created can be retrieved using ADODB_Pear_Error().
</p>
<pre class="code php"><span class="kw1">include</span><span class="br0">(</span><span class="st_h">'adodb-errorpear.inc.php'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">include</span><span class="br0">(</span><span class="st_h">'adodb.inc.php'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">include</span><span class="br0">(</span><span class="st_h">'tohtml.inc.php'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$c</span> <span class="sy0">=</span> newADOConnection<span class="br0">(</span><span class="st_h">'mysql'</span><span class="br0">)</span><span class="sy0">;</span>
<span class="re0">$c</span><span class="sy0">-&gt;</span><span class="me1">pConnect</span><span class="br0">(</span><span class="st_h">'localhost'</span><span class="sy0">,</span><span class="st_h">'root'</span><span class="sy0">,</span><span class="st_h">''</span><span class="sy0">,</span><span class="st_h">'northwind'</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$rs</span><span class="sy0">=</span><span class="re0">$c</span><span class="sy0">-&gt;</span><span class="me1">execute</span><span class="br0">(</span><span class="st_h">'select * from productsz'</span><span class="br0">)</span><span class="sy0">;</span> <span class="co2">#invalid table productsz');
</span>
<span class="kw1">if</span> <span class="br0">(</span><span class="re0">$rs</span><span class="br0">)</span> 
  rs2html<span class="br0">(</span><span class="re0">$rs</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">else</span> 
<span class="br0">{</span>
    <span class="re0">$e</span> <span class="sy0">=</span> ADODB_Pear_Error<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>  
&nbsp;&nbsp;&nbsp; <span class="kw1">echo</span> <span class="st_h">'&lt;p&gt;'</span><span class="sy0">,</span><span class="re0">$e</span><span class="sy0">-&gt;</span><span class="me1">message</span><span class="sy0">,</span><span class="st_h">'&lt;/p&gt;'</span><span class="sy0">;**</span>
<span class="br0">}</span></pre>

<p>
You can use a PEAR_Error derived class by defining the constant ADODB_PEAR_ERROR_CLASS before the adodb-errorpear.inc.php file is included. For easy debugging, you can set the default error handler in the beginning of the PHP script to PEAR_ERROR_DIE, which will cause an error message to be printed, then halt script execution:
</p>
<pre class="code php"><span class="kw1">include</span><span class="br0">(</span><span class="st_h">'PEAR.php'</span><span class="br0">)</span><span class="sy0">;</span>  
&nbsp;
PEAR<span class="sy0">::</span><span class="me2">setErrorHandling</span><span class="br0">(</span><span class="st_h">'PEAR_ERROR_DIE'</span><span class="br0">)</span><span class="sy0">;</span></pre>

<p>
Note that we do not explicitly return a PEAR_Error object to you when an error occurs. We return false instead. You have to call ADODB_Pear_Error() to get the last error or use the PEAR_ERROR_DIE technique.
</p>

</div>

<h2 class="sectionedit14" id="metaerror_and_metaerrmsg">MetaError and MetaErrMsg</h2>
<div class="level2">

<p>
If you need error messages that work across multiple databases, then use <a href="../../v5/reference/connection/metaerror.html" class="wikilink1" title="v5:reference:connection:metaerror" data-wiki-id="v5:reference:connection:metaerror">MetaError()</a>, which returns a virtualized error number, based on PEAR DB's error number system, and <a href="../../v5/reference/connection/metaerrormsg.html" class="wikilink1" title="v5:reference:connection:metaerrormsg" data-wiki-id="v5:reference:connection:metaerrormsg">MetaErrMsg()</a>.
</p>

</div>

<h2 class="sectionedit15" id="error_messages">Error Messages</h2>
<div class="level2">

<p>
Error messages are outputted using the static method 
</p>
<pre class="code">ADOConnnection::outp($msg,$newline=true). </pre>

<p>
By default, it sends the messages to the standard output. You can override this to perform error logging.
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>v5/userguide/error_handling.txt</bdi> &middot; Last modified: 2018/06/27 16:18 by <bdi>dregad</bdi></div>

                
                <hr class="a11y">
            </div></main><!-- /content -->

            <!-- PAGE ACTIONS -->
            <nav id="dokuwiki__pagetools" aria-labelledby="dokuwiki__pagetools__heading">
                <h3 class="a11y" id="dokuwiki__pagetools__heading">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="source"><a href="error_handling.html" title="Show pagesource [v]" rel="nofollow" accesskey="v"><span>Show pagesource</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M13 9h5.5L13 3.5V9M6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.11.89-2 2-2m.12 13.5l3.74 3.74 1.42-1.41-2.33-2.33 2.33-2.33-1.42-1.41-3.74 3.74m11.16 0l-3.74-3.74-1.42 1.41 2.33 2.33-2.33 2.33 1.42 1.41 3.74-3.74z"></path></svg></a></li><li class="revs"><a href="error_handling.html" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"></path></svg></a></li><li class="backlink"><a href="error_handling.html" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"></path></svg></a></li><li class="siteexport_addpage"><a href="error_handling.html" title="Export Page to HTML/PDF" rel="nofollow"><span>Export Page to HTML/PDF</span><svg width="61px" height="51px" viewbox="0 0 61 51" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><path d="M26.1891503,39.0065635 L26.0876578,38.9773206 L60.6523866,1.23972885 L60.4321374,2.11844376 L60.476442,2.07071678 L60.4265202,2.14085429 L49.5024876,45.7237994 L32.8255882,40.9187101 L26,50.508302 L26,39.2103249 L26.1891503,39.0065635 Z M60.9727675,0.862917243 L22.2676619,38.2155059 L-0.00245042233,30.2214566 L60.9727675,0.862917243 Z" id="Paper-Plane"></path></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path></svg></a></li>                    </ul>
                </div>
            </nav>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<footer id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" rel="license" class="urlextern" target="_blank">CC Attribution-Share Alike 4.0 International</a></bdi></div>
    <div class="buttons">
        <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" rel="license" target="_blank"><img src="../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 4.0 International"></a>        <a href="https://www.dokuwiki.org/donate" title="Donate" target="_blank"><img src="../../lib/tpl/dokuwiki/images/button-donate.gif" width="80" height="15" alt="Donate"></a>
        <a href="https://php.net" title="Powered by PHP" target="_blank"><img src="../../lib/tpl/dokuwiki/images/button-php.gif" width="80" height="15" alt="Powered by PHP"></a>
        <a href="../../check/referer" title="Valid HTML5" target="_blank"><img src="../../lib/tpl/dokuwiki/images/button-html5.png" width="80" height="15" alt="Valid HTML5"></a>
        <a href="../../css-validator/check/referer.profile.css3?profile=css3" title="Valid CSS" target="_blank"><img src="../../lib/tpl/dokuwiki/images/button-css.png" width="80" height="15" alt="Valid CSS"></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" target="_blank"><img src="../../lib/tpl/dokuwiki/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki"></a>
    </div>

    </div></footer><!-- /footer -->
    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/taskrunner.1688205702.gif?1688205702" width="2" height="1" alt=""></div>
    <div id="screen__mode" class="no"></div></body>
</html>
